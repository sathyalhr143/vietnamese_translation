version: '3.8'

services:
  streamlit:
    build: .
    container_name: vietnamese-translation-streamlit
    ports:
      - "8501:8501"  # Streamlit UI
      - "8000:8000"  # Backend API
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - SOURCE_LANGUAGE=vi
      - TARGET_LANGUAGE=en
      - WHISPER_MODEL_SIZE=small
      - AUDIO_SAMPLE_RATE=16000
      - AUDIO_CHUNK_DURATION=10
      - DB_PATH=/app/translations.db
      - LOG_LEVEL=INFO
    volumes:
      - ./:/app
      - ./logs:/app/logs
      - ./translations.db:/app/translations.db
    stdin_open: true
    tty: true
    networks:
      - app-network

networks:
  app-network:
    driver: bridge
  app-network:
    driver: bridge
